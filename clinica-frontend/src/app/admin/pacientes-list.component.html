<h3>Pacientes</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>ID Paciente</th>
            <th>Nombre</th>
            <th>Contacto</th>
            <th>Fecha Alta</th>
            <th>Fecha Baja</th>
            <th>Estado</th>
            <th>ID Especialista</th>
            <th>Especialista Asociado</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let p of pacientes">
            <td>{{ p.id_paciente }}</td>
            <td>{{ p.usuario.nombre }} {{ p.usuario.apellidos }}</td>
            <td>{{ p.usuario.email }}<br>{{ p.usuario.telefono }}</td>
            <td>{{ p.fecha_alta | date:'shortDate' }}</td>
            <td>{{ p.fecha_baja ? (p.fecha_baja | date:'shortDate') : '—' }}</td>
            <td>{{ p.estado }}</td>
            <td>{{ p.id_especialista }}</td>
            <td>
                {{ p.especialista?.usuario?.nombre || '—' }} {{ p.especialista?.usuario?.apellidos || '' }}
            </td>
            <td>
                <button class="btn btn-sm btn-primary me-1" (click)="abrirModal(p)">Editar</button>
                <button class="btn btn-sm btn-danger" (click)="eliminar(p.id_paciente)">Eliminar</button>
            </td>
        </tr>
    </tbody>
</table>

<app-paciente-edit
    *ngIf="pacienteEditando"
    [paciente]="pacienteEditando"
    (guardar)="actualizar($event)"
    (cancelar)="pacienteEditando = null">
</app-paciente-edit>
