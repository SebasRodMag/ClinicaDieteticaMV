<div class="container mt-4">
    <h2 class="mb-3">Documentos compartidos por pacientes</h2>

    <div class="row g-3 align-items-end">
        <div class="col-md-6">
            <label class="form-label">Paciente</label>
            <ng-select [items]="pacientes" bindLabel="nombreCompleto" bindValue="id"
                placeholder="Selecciona un paciente" [(ngModel)]="pacienteSeleccionadoId" (change)="onPacienteChange()"
                [searchable]="true">
            </ng-select>
        </div>
    </div>

    <div *ngIf="loadingDocs" class="text-center my-3">
        <div class="spinner-border" role="status"><span class="visually-hidden">Cargando...</span></div>
    </div>

    <div *ngIf="!loadingDocs && pacienteSeleccionadoId && documentosTabla.length === 0" class="alert alert-info mt-3">
        El paciente no ha compartido documentos.
    </div>

    <div *ngIf="!loadingDocs && documentosTabla.length > 0" class="mt-3">
        <app-tabla-documentos *ngIf="!loadingDocs" [documentos]="documentosTabla" [mostrarDescargar]="true"
            (descargar)="onDescargar($event)">
        </app-tabla-documentos>
    </div>

    <div *ngIf="!loadingDocs && !pacienteSeleccionadoId" class="alert alert-secondary mt-3">
        Selecciona un paciente para ver sus documentos.
    </div>
</div>