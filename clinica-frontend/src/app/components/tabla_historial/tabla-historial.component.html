<div class="table-responsive">
    <table class="table table-hover table-striped align-middle">
        <thead class="table-light">
            <tr>
                <th>Fecha</th>
                <th>Paciente</th>
                <th>Observaciones</th>
                <th style="width: 120px;">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let historial of historialesPaginados">
                <td>{{ formatearFecha(historial.fecha || '') }}</td>
                <td>{{ historial.paciente?.user?.nombre }} {{ historial.paciente?.user?.apellidos }}</td>
                <td>
                    {{ historial.observaciones_especialista ? (historial.observaciones_especialista | slice:0:40) + '...' : 'Sin observaciones' }}
                </td>
                <td>
                    <button class="btn btn-sm btn-primary me-1" (click)="editar.emit(historial)">
                        <i class="bi bi-pencil"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" (click)="eliminar.emit(historial)">
                        <i class="bi bi-trash"></i>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- PaginaciÃ³n simple -->
<nav *ngIf="totalPaginas() > 1" class="d-flex justify-content-center mt-2">
    <ul class="pagination pagination-sm">
        <li class="page-item" [class.disabled]="paginaActual === 1">
            <button class="page-link" (click)="cambiarPagina(paginaActual - 1)" [disabled]="paginaActual === 1">&laquo;</button>
        </li>
        <li
            class="page-item"
            *ngFor="let page of [].constructor(totalPaginas()); let idx = index"
            [class.active]="paginaActual === idx + 1"
        >
            <button class="page-link" (click)="cambiarPagina(idx + 1)">{{ idx + 1 }}</button>
        </li>
        <li class="page-item" [class.disabled]="paginaActual === totalPaginas()">
            <button class="page-link" (click)="cambiarPagina(paginaActual + 1)" [disabled]="paginaActual === totalPaginas()">&raquo;</button>
        </li>
    </ul>
</nav>
